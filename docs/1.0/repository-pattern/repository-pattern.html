<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Repository | Laravel Restify</title>
    <meta name="description" content="A package to start the REST API">
    <link rel="manifest" href="/laravel-restify/manifest.json">
  <link rel="icon" href="/laravel-restify/icon.png">
    <meta name="docsearch:version" content="1.0.0">
    <link rel="preload" href="/laravel-restify/assets/css/0.styles.e17ee226.css" as="style"><link rel="preload" href="/laravel-restify/assets/js/app.9f7e32d5.js" as="script"><link rel="preload" href="/laravel-restify/assets/js/2.c48f6ac5.js" as="script"><link rel="preload" href="/laravel-restify/assets/js/11.06c45be6.js" as="script"><link rel="prefetch" href="/laravel-restify/assets/js/10.3f3f6739.js"><link rel="prefetch" href="/laravel-restify/assets/js/12.840b05f7.js"><link rel="prefetch" href="/laravel-restify/assets/js/13.18cf7203.js"><link rel="prefetch" href="/laravel-restify/assets/js/14.5b30f001.js"><link rel="prefetch" href="/laravel-restify/assets/js/15.4b638093.js"><link rel="prefetch" href="/laravel-restify/assets/js/16.3ba1d8ca.js"><link rel="prefetch" href="/laravel-restify/assets/js/17.6d408da1.js"><link rel="prefetch" href="/laravel-restify/assets/js/18.0e7ebcd1.js"><link rel="prefetch" href="/laravel-restify/assets/js/19.13d7564b.js"><link rel="prefetch" href="/laravel-restify/assets/js/20.9ac51fba.js"><link rel="prefetch" href="/laravel-restify/assets/js/21.2d500876.js"><link rel="prefetch" href="/laravel-restify/assets/js/22.af8ea074.js"><link rel="prefetch" href="/laravel-restify/assets/js/23.e87aab82.js"><link rel="prefetch" href="/laravel-restify/assets/js/3.3bbe9845.js"><link rel="prefetch" href="/laravel-restify/assets/js/4.fec85292.js"><link rel="prefetch" href="/laravel-restify/assets/js/5.5adab4f9.js"><link rel="prefetch" href="/laravel-restify/assets/js/6.ab19288b.js"><link rel="prefetch" href="/laravel-restify/assets/js/7.eff9fbd6.js"><link rel="prefetch" href="/laravel-restify/assets/js/8.83db03f1.js"><link rel="prefetch" href="/laravel-restify/assets/js/9.fb2371b9.js">
    <link rel="stylesheet" href="/laravel-restify/assets/css/0.styles.e17ee226.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/laravel-restify/" class="home-link router-link-active"><img src="/laravel-restify/assets/img/icon.png" alt="Laravel Restify" class="logo"> <span class="site-name can-hide">Laravel Restify</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/laravel-restify/docs/2.0/" class="nav-link">Docs</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel-restify/docs/1.0/" class="nav-link router-link-active">1.0</a></li><li class="dropdown-item"><!----> <a href="/laravel-restify/docs/2.0/" class="nav-link">2.0</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/binaryk/laravel-restify" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://binarcode.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/laravel-restify/docs/2.0/" class="nav-link">Docs</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel-restify/docs/1.0/" class="nav-link router-link-active">1.0</a></li><li class="dropdown-item"><!----> <a href="/laravel-restify/docs/2.0/" class="nav-link">2.0</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/binaryk/laravel-restify" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Git
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://binarcode.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Quick Start</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/quickstart.html" class="sidebar-link">Installation 1.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/quickstart.html#requirements" class="sidebar-link">Requirements</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/quickstart.html#installing-laravel-restify" class="sidebar-link">Installing Laravel Restify</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/quickstart.html#setup-laravel-restify" class="sidebar-link">Setup Laravel Restify</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/quickstart.html#quick-start" class="sidebar-link">Quick start</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/quickstart.html#generate-repository" class="sidebar-link">Generate repository</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/quickstart.html#generate-policy" class="sidebar-link">Generate policy</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Repository</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html" class="active sidebar-link">Repository</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#quick-start" class="sidebar-link">Quick start</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#defining-repositories" class="sidebar-link">Defining Repositories</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#actions-handled-by-the-repository" class="sidebar-link">Actions handled by the Repository</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#fields" class="sidebar-link">Fields</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#dependency-injection" class="sidebar-link">Dependency injection</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#restify-repository-conventions" class="sidebar-link">Restify Repository Conventions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#model-name" class="sidebar-link">Model name</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#crud-methods-overriding" class="sidebar-link">CRUD Methods overriding</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#index" class="sidebar-link">index</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#show" class="sidebar-link">show</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#store" class="sidebar-link">store</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#update" class="sidebar-link">update</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#destroy" class="sidebar-link">destroy</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#transformation-layer" class="sidebar-link">Transformation layer</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#custom-routes" class="sidebar-link">Custom routes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#route-prefix" class="sidebar-link">Route prefix</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#route-middleware" class="sidebar-link">Route middleware</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/repository-pattern.html#route-namespace" class="sidebar-link">Route Namespace</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Field</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/repository-pattern/field.html" class="sidebar-link">Field</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/field.html#attaching-rules" class="sidebar-link">Attaching rules</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/field.html#storing-rules" class="sidebar-link">Storing Rules</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/field.html#update-rules" class="sidebar-link">Update Rules</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/field.html#fill-callback" class="sidebar-link">Fill callback</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/repository-pattern/field.html#store-callback" class="sidebar-link">Store callback</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Rest Controller</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html" class="sidebar-link">/docs/1.0/rest-methods/rest-methods.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#restify-response-quickstart" class="sidebar-link">Restify Response Quickstart</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#defining-the-route" class="sidebar-link">Defining The Route</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#creating-the-controller" class="sidebar-link">Creating The Controller</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#writing-the-api-response-logic" class="sidebar-link">Writing The API Response Logic</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#receiving-api-response" class="sidebar-link">Receiving API Response</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#response-factory" class="sidebar-link">Response factory</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#displaying-response-errors" class="sidebar-link">Displaying Response Errors</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#custom-header" class="sidebar-link">Custom Header</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#optional-attributes" class="sidebar-link">Optional Attributes</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#hiding-default-attribute" class="sidebar-link">Hiding Default Attribute</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#rest-response-methods" class="sidebar-link">Rest Response Methods</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#data-attaching" class="sidebar-link">Data attaching</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#headers-setup" class="sidebar-link">Headers setup</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#meta-information" class="sidebar-link">Meta information</a></li></ul></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#response-code-modifiers" class="sidebar-link">Response code modifiers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#auth-401" class="sidebar-link">Auth 401</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#refresh-103" class="sidebar-link">Refresh 103</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#created-201" class="sidebar-link">Created 201</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#deleted-no-content-204" class="sidebar-link">Deleted (No Content) 204</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#invalid-400" class="sidebar-link">Invalid 400</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#unauthorized-401" class="sidebar-link">Unauthorized 401</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#forbidden-403" class="sidebar-link">Forbidden 403</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#missing-404" class="sidebar-link">Missing 404</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#success" class="sidebar-link">success</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#unavailable-503" class="sidebar-link">Unavailable 503</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#throttle-429" class="sidebar-link">Throttle 429</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#debug-methods" class="sidebar-link">Debug methods</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#line" class="sidebar-link">line</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#file" class="sidebar-link">file</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#stack" class="sidebar-link">stack</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#errors-methods" class="sidebar-link">Errors methods</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#errors" class="sidebar-link">errors</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/rest-methods/rest-methods.html#adderror" class="sidebar-link">addError</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Filtering</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/search/search.html" class="sidebar-link">Filtering entities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/search/search.html#search" class="sidebar-link">Search</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/search/search.html#match" class="sidebar-link">Match</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/search/search.html#sort" class="sidebar-link">Sort</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/search/search.html#eager-loading-aka-withs" class="sidebar-link">Eager loading - aka withs</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Auth service</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/auth/auth.html" class="sidebar-link">Authentication setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/auth/auth.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/auth/auth.html#register-users" class="sidebar-link">Register users</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/auth/auth.html#verifying-users-optional" class="sidebar-link">Verifying users (optional)</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/auth/auth.html#login-users-issue-token" class="sidebar-link">Login users (issue token)</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/auth/auth.html#forgot-password" class="sidebar-link">Forgot password</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/auth/auth.html#reset-password" class="sidebar-link">Reset password</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Error handler</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel-restify/docs/1.0/exception-handler/exception-handler.html" class="sidebar-link">Restify Exception Handler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/exception-handler/exception-handler.html#disable-restify-exception-handler" class="sidebar-link">Disable Restify exception handler</a></li><li class="sidebar-sub-header"><a href="/laravel-restify/docs/1.0/exception-handler/exception-handler.html#intercept-exceptions" class="sidebar-link">Intercept exceptions</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="repository"><a href="#repository" class="header-anchor">#</a> Repository</h1> <p></p><div class="table-of-contents"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#quick-start">Quick start</a></li><li><a href="#defining-repositories">Defining Repositories</a><ul><li><a href="#actions-handled-by-the-repository">Actions handled by the Repository</a></li><li><a href="#fields">Fields</a></li></ul></li><li><a href="#dependency-injection">Dependency injection</a></li><li><a href="#restify-repository-conventions">Restify Repository Conventions</a><ul><li><a href="#model-name">Model name</a></li></ul></li><li><a href="#crud-methods-overriding">CRUD Methods overriding</a><ul><li><a href="#index">index</a></li><li><a href="#show">show</a></li><li><a href="#store">store</a></li><li><a href="#update">update</a></li><li><a href="#destroy">destroy</a></li></ul></li><li><a href="#transformation-layer">Transformation layer</a></li><li><a href="#custom-routes">Custom routes</a><ul><li><a href="#route-prefix">Route prefix</a></li><li><a href="#route-middleware">Route middleware</a></li><li><a href="#route-namespace">Route Namespace</a></li></ul></li></ul></div><p></p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>The Repository is the main core of the Laravel Restify, included with Laravel provides the an easy way of
managing (usually called &quot;CRUD&quot;). It works along with
<a href="https://laravel.com/docs/6.x/eloquent-resources" target="_blank" rel="noopener noreferrer">Laravel API Resource<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>,
that means you can use all helpers from there right away.</p> <h2 id="quick-start"><a href="#quick-start" class="header-anchor">#</a> Quick start</h2> <p>The follow command will generate you the Repository which will take the control over the post resource.</p> <div class="language-shell script extra-class"><pre class="language-shell"><code>php artisan restify:repository Post
</code></pre></div><p>The newly created repository could be found in the <code>app/Restify</code> directory.</p> <h2 id="defining-repositories"><a href="#defining-repositories" class="header-anchor">#</a> Defining Repositories</h2> <div class="language-php extra-class"><pre class="language-php"><code>
<span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Repositories<span class="token punctuation">\</span>Repository</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Repository</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The model the repository corresponds to.
     *
     * @var string
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$model</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'App\\Post'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="actions-handled-by-the-repository"><a href="#actions-handled-by-the-repository" class="header-anchor">#</a> Actions handled by the Repository</h3> <p>Having this in place you're basically ready for the CRUD actions over posts.
You have available the follow endpoints:</p> <table><thead><tr><th style="text-align:left;">Verb</th> <th style="text-align:left;">URI</th> <th style="text-align:left;">Action</th></tr></thead> <tbody><tr><td style="text-align:left;">GET</td> <td style="text-align:left;"><code>/restify-api/posts</code></td> <td style="text-align:left;">index</td></tr> <tr><td style="text-align:left;">GET</td> <td style="text-align:left;"><code>/restify-api/posts/{post}</code></td> <td style="text-align:left;">show</td></tr> <tr><td style="text-align:left;">POST</td> <td style="text-align:left;"><code>/restify-api/posts</code></td> <td style="text-align:left;">store</td></tr> <tr><td style="text-align:left;">PATCH</td> <td style="text-align:left;"><code>/restify-api/posts/{post}</code></td> <td style="text-align:left;">update</td></tr> <tr><td style="text-align:left;">DELETE</td> <td style="text-align:left;"><code>/restify-api/posts/{post}</code></td> <td style="text-align:left;">destroy</td></tr></tbody></table> <h3 id="fields"><a href="#fields" class="header-anchor">#</a> Fields</h3> <p>When storing or updating a model - Restify will get from the request all of the attributes matching by key
with those from the <code>fillable</code> array of the model definition.
Restify will fill these fields with the value from the request.
However if you want to transform some attributes before they are filled into the model
you can do that by defining the <code>fields</code> method:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Fields<span class="token punctuation">\</span>Field</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Repositories<span class="token punctuation">\</span>Repository</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Requests<span class="token punctuation">\</span>RestifyRequest</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Repository</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The model the repository corresponds to.
     *
     * @var string
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$model</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'App\\Post'</span><span class="token punctuation">;</span>

  <span class="token comment">/**
     * Resolvable attributes before storing/updating
     * 
     * @param  RestifyRequest  $request
     * @return array
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">fields</span><span class="token punctuation">(</span>RestifyRequest <span class="token variable">$request</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            Field<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">storeCallback</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$requestValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$requestValue</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token variable">$requestValue</span> <span class="token punctuation">:</span> `<span class="token constant">N</span><span class="token operator">/</span><span class="token constant">A</span>`<span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span>  
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Field</code> class has many mutations, validators and interactions you can use, these are documented <a href="/laravel-restify/docs/repository-pattern/field">here</a></p></div> <h2 id="dependency-injection"><a href="#dependency-injection" class="header-anchor">#</a> Dependency injection</h2> <p>The Laravel <a href="https://laravel.com/docs/6.x/container" target="_blank" rel="noopener noreferrer">service container<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is used to resolve all Laravel Restify repositories.
As a result, you are able to type-hint any dependencies your <code>Repository</code> may need in its constructor.
The declared dependencies will automatically be resolved and injected into the repository instance:</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Don't forget to to call the parent <code>contructor</code></p></div> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Repositories<span class="token punctuation">\</span>Repository</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Repository</span>
<span class="token punctuation">{</span>
   <span class="token comment">/**
    * The model the repository corresponds to.
    *
    * @var string
    */</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$model</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'App\\Post'</span><span class="token punctuation">;</span> 

    <span class="token comment">/**
    * @var PostService 
    */</span>
   <span class="token keyword">private</span> <span class="token variable">$postService</span><span class="token punctuation">;</span> 

   <span class="token comment">/**
    * Post constructor.
    * @param PostService $service
    */</span>
   <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>PostService <span class="token variable">$service</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
       <span class="token keyword">parent</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">postService</span> <span class="token operator">=</span> <span class="token variable">$service</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="restify-repository-conventions"><a href="#restify-repository-conventions" class="header-anchor">#</a> Restify Repository Conventions</h2> <p>Let's diving deeper into the repository, and take step by step each of its available tools and customizable
modules. Since this is just a helper, it should not break your normal development flow.</p> <h3 id="model-name"><a href="#model-name" class="header-anchor">#</a> Model name</h3> <p>As we already noticed, each repository basically works as a wrapper over a specific resource.
The fancy naming <code>resource</code> is nothing more than a database entity (posts, users etc.). Well, to make the
repository aware of the entity it should take care of, we have to define the model property:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The model the repository corresponds to.
*
* @var string
*/</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$model</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'App\\Post'</span><span class="token punctuation">;</span> 
</code></pre></div><h2 id="crud-methods-overriding"><a href="#crud-methods-overriding" class="header-anchor">#</a> CRUD Methods overriding</h2> <p>Laravel Restify magically made all &quot;CRUD&quot; operations for you. But sometimes you may want to intercept, or override the
entire logic of a specific action. Let's say your <code>save</code> method has to do something different than just storing
the newly created entity in the database. In this case you can easily override each action (<a href="#actions-handled-by-the-repository">defined here</a>) from the repository:</p> <h3 id="index"><a href="#index" class="header-anchor">#</a> index</h3> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span>RestifyRequest <span class="token variable">$request</span><span class="token punctuation">,</span> Paginator <span class="token variable">$paginated</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Silence is golden</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="show"><a href="#show" class="header-anchor">#</a> show</h3> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span>RestifyRequest <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$repositoryId</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Silence is golden</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="store"><a href="#store" class="header-anchor">#</a> store</h3> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token comment">/**
     * @param  RestifyRequest  $request
     * @return \Illuminate\Http\JsonResponse|void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Binaryk\<span class="token package">LaravelRestify<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Requests<span class="token punctuation">\</span>RestifyRequest</span> <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Silence is golden</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="update"><a href="#update" class="header-anchor">#</a> update</h3> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span>RestifyRequest <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$repositoryId</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Silence is golden</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="destroy"><a href="#destroy" class="header-anchor">#</a> destroy</h3> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">destroy</span><span class="token punctuation">(</span>RestifyRequest <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$repositoryId</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Silence is golden</span>
    <span class="token punctuation">}</span>
</code></pre></div><h2 id="transformation-layer"><a href="#transformation-layer" class="header-anchor">#</a> Transformation layer</h2> <p>When you call the <code>posts/{post}</code> endpoint, the repository will return  the following primary
data for a single resource object:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ... this post's attributes</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;meta&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// ... by default meta includes information about user authorizations over the entity</span>
      <span class="token property">&quot;authorizedToView&quot;</span><span class="token operator">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;authorizedToCreate&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;authorizedToUpdate&quot;</span><span class="token operator">:</span>  <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">&quot;authorizedToDelete&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>This response is made according to <a href="https://jsonapi.org/format/" target="_blank" rel="noopener noreferrer">JSON:API format<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. You can change it for all
repositories at once by modifying the <code>resolveDetails</code> method of the abstract Repository, or for a specific
repository by overriding it:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Resolve the response for the details
 *
 * @param $request
 * @param $serialized
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">serializeDetails</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$serialized</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$serialized</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can change the index response by modifying the <code>resolveIndex</code> method:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Resolve the response for the details
 *
 * @param $request
 * @param $serialized
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">serializeIndex</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$serialized</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$serialized</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="custom-routes"><a href="#custom-routes" class="header-anchor">#</a> Custom routes</h2> <p>Laravel Restify has its own &quot;CRUD&quot; routes, however you're able to define your own routes right from your Repository class:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Defining custom routes
 * 
 * The default prefix of this route is the uriKey (e.g. 'restify-api/posts'),
 * 
 * The default namespace is AppNamespace/Http/Controllers
 * 
 * The default middlewares are the same from config('restify.middleware')
 *
 * However all options could be overrided by passing an $options argument
 *
 * @param  \Illuminate\Routing\Router  $router
 * @param $options
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">routes</span><span class="token punctuation">(</span>\<span class="token package">Illuminate<span class="token punctuation">\</span>Routing<span class="token punctuation">\</span>Router</span> <span class="token variable">$router</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$router</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'hello-world'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Let's diving into a more &quot;real life&quot; example. Let's take the Post repository we had above:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Routing<span class="token punctuation">\</span>Router</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Repositories<span class="token punctuation">\</span>Repository</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token keyword">extends</span> <span class="token class-name">Repository</span>
<span class="token punctuation">{</span>
   <span class="token comment">/*
   * @param  \Illuminate\Routing\Router  $router
   * @param $options
   */</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">routes</span><span class="token punctuation">(</span>Router <span class="token variable">$router</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
       <span class="token variable">$router</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/{id}/kpi'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'PostController@kpi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
       
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">uriKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token single-quoted-string string">'posts'</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>At this moment Restify built the new route as a child of the <code>posts</code>, so it has the route:</p> <div class="language-http request extra-class"><pre class="language-http"><code><span class="token header-name keyword">GET:</span> /restify-api/posts/{id}/kpi
</code></pre></div><p>This route is pointing to the <code>PostsController</code>, let's define it:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>JsonResponse</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Binaryk<span class="token punctuation">\</span>LaravelRestify<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>RestController</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PostController</span> <span class="token keyword">extends</span> <span class="token class-name">RestController</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Show the profile for the given user.
     *
     * @param  int  $id
     * @return JsonResponse
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">kpi</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...</span>

        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">response</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><h3 id="route-prefix"><a href="#route-prefix" class="header-anchor">#</a> Route prefix</h3> <p>As we noticed in the example above, the route is generated as a child of the current repository <code>uriKey</code> route,
however sometimes you may want to have a separate prefix, which doesn't depends of the URI of the current repository.
Restify provide you an easy of doing that, by adding default value <code>prefix</code> for the second <code>$options</code> argument:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * @param  \Illuminate\Routing\Router  $router
 * @param $options
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">routes</span><span class="token punctuation">(</span>Router <span class="token variable">$router</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'prefix'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'api'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$router</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'hello-world'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now the generated route will look like this:</p> <div class="language-http request extra-class"><pre class="language-http"><code><span class="token header-name keyword">GET:</span> '/api/hello-world
</code></pre></div><p>With <code>api</code> as a custom prefix.</p> <h3 id="route-middleware"><a href="#route-middleware" class="header-anchor">#</a> Route middleware</h3> <p>All routes declared in the <code>routes</code> method, will have the same middelwares defined in your <code>restify.middleware</code> configuration file.
Overriding default middlewares is a breeze with Restify:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * @param  \Illuminate\Routing\Router  $router
 * @param $options
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">routes</span><span class="token punctuation">(</span>Router <span class="token variable">$router</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'middleware'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>CustomMiddleware<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$router</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'hello-world'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In that case, the single middleware of the route will be defined by the <code>CustomMiddleware</code> class.</p> <h3 id="route-namespace"><a href="#route-namespace" class="header-anchor">#</a> Route Namespace</h3> <p>By default each route defined in the <code>routes</code> method, will have the namespace <code>AppRootNamespace\Http\Controllers</code>.
You can override it easily by using <code>namespace</code> configuration key:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * @param  \Illuminate\Routing\Router  $router
 * @param $options
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function">routes</span><span class="token punctuation">(</span>Router <span class="token variable">$router</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'namespace'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'App\Services'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$router</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'hello-world'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'WorldController@hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/laravel-restify/docs/1.0/quickstart.html" class="prev">Installation 1.0</a></span> <span class="next"><a href="/laravel-restify/docs/1.0/repository-pattern/field.html">Field</a>
      
    </span></p></div> </main></div><div class="global-ui"><SWUpdatePopup></SWUpdatePopup></div></div>
    <script src="/laravel-restify/assets/js/app.9f7e32d5.js" defer></script><script src="/laravel-restify/assets/js/2.c48f6ac5.js" defer></script><script src="/laravel-restify/assets/js/11.06c45be6.js" defer></script>
  </body>
</html>
